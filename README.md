([ç®€ä½“ä¸­æ–‡](./README.md) | [English](./README_EN.md))

<div align="center">

# ğŸ™ï¸ è¯­éŸ³å®æ—¶è½¬å½•æœåŠ¡

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-green.svg)](https://fastapi.tiangolo.com/)
[![FunASR](https://img.shields.io/badge/FunASR-1.0+-orange.svg)](https://github.com/modelscope/FunASR)
[![Docker](https://img.shields.io/badge/Docker-supported-blue.svg)](https://www.docker.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](./LICENSE)

**åŸºäº FunASR çš„å®æ—¶è¯­éŸ³è½¬å½•åç«¯æœåŠ¡ï¼Œæ”¯æŒ PTT æ¨¡å¼å’Œ WebSocket å®æ—¶é€šä¿¡**

[å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) | [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) | [åœ¨çº¿æ¼”ç¤º](#åœ¨çº¿æ¼”ç¤º) | [æ–‡æ¡£](#æ–‡æ¡£) | [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

</div>

---

## ğŸ“– ç›®å½•

- [ç®€ä»‹](#ç®€ä»‹)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [åœ¨çº¿æ¼”ç¤º](#åœ¨çº¿æ¼”ç¤º)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
  - [ç¯å¢ƒè¦æ±‚](#ç¯å¢ƒè¦æ±‚)
  - [ä¸€é”®éƒ¨ç½²](#ä¸€é”®éƒ¨ç½²)
  - [Docker éƒ¨ç½²](#docker-éƒ¨ç½²)
  - [æ‰‹åŠ¨éƒ¨ç½²](#æ‰‹åŠ¨éƒ¨ç½²)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)
- [æ€§èƒ½æŒ‡æ ‡](#æ€§èƒ½æŒ‡æ ‡)
- [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
- [æ–‡æ¡£](#æ–‡æ¡£)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [æ›´æ–°æ—¥å¿—](#æ›´æ–°æ—¥å¿—)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)
- [è‡´è°¢](#è‡´è°¢)
- [è®¸å¯è¯](#è®¸å¯è¯)

---

## ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„å®æ—¶è¯­éŸ³è½¬å½•åç«¯æœåŠ¡ï¼ŒåŸºäºé˜¿é‡Œè¾¾æ‘©é™¢å¼€æºçš„ [FunASR](https://github.com/modelscope/FunASR) å¼•æ“å¼€å‘ã€‚é‡‡ç”¨ PTTï¼ˆPush-to-Talkï¼ŒæŒ‰ä½è¯´è¯ï¼‰æ¨¡å¼ï¼Œé€šè¿‡ WebSocket åè®®å®ç°ä½å»¶è¿Ÿçš„åŒå‘é€šä¿¡ï¼Œä¸“ä¸ºå®æ—¶è¯­éŸ³è¯†åˆ«åœºæ™¯è®¾è®¡ã€‚

### ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

- **ğŸš€ å¿«é€Ÿå“åº”**ï¼šæ¨¡å‹å¸¸é©»å†…å­˜ï¼Œè¯†åˆ«å»¶è¿Ÿ < 1000msï¼ˆCPU ç¯å¢ƒï¼‰
- **ğŸ’¡ æ™ºèƒ½æ§åˆ¶**ï¼šPTT æ¨¡å¼ç²¾ç¡®æ§åˆ¶ï¼ŒæŒ‰éœ€è¯†åˆ«ï¼ŒèŠ‚çœèµ„æº
- **ğŸ”§ æ˜“äºéƒ¨ç½²**ï¼šçº¯ CPU ç¯å¢ƒï¼Œæ”¯æŒ Docker ä¸€é”®éƒ¨ç½²
- **ğŸ“Š ç”Ÿäº§å°±ç»ª**ï¼šæ”¯æŒè´Ÿè½½å‡è¡¡ã€å¥åº·æ£€æŸ¥ã€è¯¦ç»†æ—¥å¿—
- **ğŸŒ æ ‡å‡†åè®®**ï¼šåŸºäº WebSocketï¼Œæ˜“äºé›†æˆå„ç±»å‰ç«¯
- **ğŸ¨ å¼€ç®±å³ç”¨**ï¼šæä¾›æµ‹è¯•é¡µé¢ï¼Œå¿«é€ŸéªŒè¯åŠŸèƒ½

---

## åŠŸèƒ½ç‰¹æ€§

### âœ¨ æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| **å®æ—¶è¯­éŸ³è¯†åˆ«** | åŸºäº FunASR paraformer-zh-streaming æ¨¡å‹ | âœ… |
| **PTT æ¨¡å¼** | æ”¯æŒ start/stop/reset æ§åˆ¶æŒ‡ä»¤ | âœ… |
| **WebSocket é€šä¿¡** | ä½å»¶è¿ŸåŒå‘å®æ—¶é€šä¿¡ | âœ… |
| **æµå¼å¤„ç†** | è¾¹æ¥æ”¶è¾¹è¯†åˆ«ï¼Œå®æ—¶è¿”å›ç»“æœ | âœ… |
| **å¤šç”¨æˆ·å¹¶å‘** | æ”¯æŒ 10-20 å¹¶å‘è¿æ¥ï¼ˆCPU ç¯å¢ƒï¼‰ | âœ… |
| **æ¨¡å‹å¸¸é©»** | é¢„åŠ è½½æ¨¡å‹ï¼Œç©ºé—²æ—¶ä¸æ¶ˆè€—è®¡ç®—èµ„æº | âœ… |

### ğŸ”Œ æ¥å£æ”¯æŒ

- **WebSocket æ¥å£**ï¼š`/ws/asr` - è¯­éŸ³è¯†åˆ«ä¸»æ¥å£
- **HTTP æ¥å£**ï¼š
  - `/` - æœåŠ¡ä¿¡æ¯
  - `/health` - å¥åº·æ£€æŸ¥
  - `/stats` - ç»Ÿè®¡ä¿¡æ¯
  - `/test` - æµ‹è¯•é¡µé¢

### ğŸ“¦ éƒ¨ç½²æ–¹å¼

- âœ… **ç›´æ¥éƒ¨ç½²**ï¼šPython è™šæ‹Ÿç¯å¢ƒï¼Œé€‚åˆå¼€å‘è°ƒè¯•
- âœ… **Docker éƒ¨ç½²**ï¼šå®¹å™¨åŒ–éƒ¨ç½²ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ
- âœ… **ä¸€é”®éƒ¨ç½²**ï¼šWindows/Linux è„šæœ¬ï¼Œé›¶é…ç½®å¯åŠ¨

### ğŸ¯ æ”¯æŒçš„éŸ³é¢‘æ ¼å¼

| å‚æ•° | å€¼ |
|------|---|
| é‡‡æ ·ç‡ | 16000 Hz |
| å£°é“æ•° | 1ï¼ˆå•å£°é“ï¼‰ |
| ç¼–ç æ ¼å¼ | PCM |
| ä½æ·±åº¦ | 16 bit (INT16) |
| ä¼ è¾“ç¼–ç  | Base64 |

---

## åœ¨çº¿æ¼”ç¤º

æœåŠ¡å¯åŠ¨åï¼Œè®¿é—®æµ‹è¯•é¡µé¢å³å¯ä½“éªŒï¼š

```
http://localhost:9999/test
```

![æµ‹è¯•é¡µé¢ç¤ºä¾‹](./docs/images/demo.png)

> ğŸ“ **æ³¨æ„**ï¼šæµ‹è¯•é¡µé¢æä¾›äº†å®Œæ•´çš„ WebSocket äº¤äº’ç¤ºä¾‹ï¼ŒåŒ…æ‹¬è¿æ¥ç®¡ç†ã€æ§åˆ¶æŒ‡ä»¤å‘é€ã€æ¶ˆæ¯æ¥æ”¶ç­‰ã€‚

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

| ç»„ä»¶ | æœ€ä½è¦æ±‚ | æ¨èé…ç½® |
|------|---------|---------|
| **æ“ä½œç³»ç»Ÿ** | Windows 10+ / Ubuntu 20.04+ / CentOS 7+ | - |
| **Python** | 3.8+ | 3.9+ |
| **CPU** | 2 æ ¸å¿ƒ | 4 æ ¸å¿ƒ+ |
| **å†…å­˜** | 4GB | 8GB+ |
| **ç£ç›˜** | 10GB | 20GB+ |
| **Docker** (å¯é€‰) | 20.10+ | æœ€æ–°ç‰ˆæœ¬ |

### ä¸€é”®éƒ¨ç½²

#### Windows

```batch
# å³é”®"ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ"
ä¸€é”®éƒ¨ç½².bat

# é€‰æ‹©éƒ¨ç½²æ–¹å¼ï¼š
# [1] ç›´æ¥éƒ¨ç½² - é€‚åˆå¼€å‘
# [2] Docker éƒ¨ç½² - é€‚åˆç”Ÿäº§
```

#### Linux/macOS

```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x start.sh

# è¿è¡Œå¯åŠ¨è„šæœ¬
./start.sh
```

æœåŠ¡å¯åŠ¨åè®¿é—®ï¼š
- ä¸»é¡µï¼šhttp://localhost:9999
- æµ‹è¯•é¡µé¢ï¼šhttp://localhost:9999/test
- å¥åº·æ£€æŸ¥ï¼šhttp://localhost:9999/health

### Docker éƒ¨ç½²

#### æ–¹å¼ 1ï¼šä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository_url>
cd asr

# 2. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 3. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# 4. åœæ­¢æœåŠ¡
docker-compose down
```

#### æ–¹å¼ 2ï¼šä½¿ç”¨ Docker å‘½ä»¤

```bash
# æ„å»ºé•œåƒ
docker build -t asr-service:latest .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name asr-service \
  -p 9999:9999 \
  -v $(pwd)/models:/root/.cache/modelscope \
  -v $(pwd)/logs:/app/logs \
  asr-service:latest

# æŸ¥çœ‹æ—¥å¿—
docker logs -f asr-service
```

### æ‰‹åŠ¨éƒ¨ç½²

```bash
# 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# venv\Scripts\activate   # Windows

# 2. å®‰è£… PyTorch (CPU ç‰ˆæœ¬)
pip install torch torchaudio --index-url https://download.pytorch.org/whl/cpu

# 3. å®‰è£…å…¶ä»–ä¾èµ–
pip install -r requirements.txt

# 4. å¯åŠ¨æœåŠ¡
python app.py
```

---

## ä½¿ç”¨ç¤ºä¾‹

### Python å®¢æˆ·ç«¯ç¤ºä¾‹

```python
import asyncio
import websockets
import json
import base64
import numpy as np

async def test_asr():
    uri = "ws://localhost:9999/ws/asr"
    
    async with websockets.connect(uri) as websocket:
        # 1. æ¥æ”¶è¿æ¥ç¡®è®¤
        response = await websocket.recv()
        print(f"è¿æ¥æˆåŠŸ: {response}")
        
        # 2. å‘é€ start æŒ‡ä»¤
        await websocket.send(json.dumps({
            "type": "control",
            "command": "start",
            "timestamp": int(time.time() * 1000)
        }))
        
        # 3. å‘é€éŸ³é¢‘æ•°æ®
        # å‡è®¾ audio_data æ˜¯ 16kHz, å•å£°é“, PCM æ ¼å¼çš„éŸ³é¢‘
        audio_base64 = base64.b64encode(audio_data).decode()
        await websocket.send(json.dumps({
            "type": "audio",
            "data": audio_base64,
            "timestamp": int(time.time() * 1000)
        }))
        
        # 4. æ¥æ”¶è¯†åˆ«ç»“æœ
        result = await websocket.recv()
        result_json = json.loads(result)
        print(f"è¯†åˆ«ç»“æœ: {result_json['text']}")
        
        # 5. å‘é€ stop æŒ‡ä»¤
        await websocket.send(json.dumps({
            "type": "control",
            "command": "stop",
            "timestamp": int(time.time() * 1000)
        }))

asyncio.run(test_asr())
```

### JavaScript å®¢æˆ·ç«¯ç¤ºä¾‹

```javascript
// å»ºç«‹ WebSocket è¿æ¥
const ws = new WebSocket('ws://localhost:9999/ws/asr');

ws.onopen = () => {
    console.log('WebSocket è¿æ¥å·²å»ºç«‹');
};

ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    
    if (data.type === 'result') {
        console.log('è¯†åˆ«ç»“æœ:', data.text);
    } else if (data.type === 'status') {
        console.log('çŠ¶æ€:', data.message);
    }
};

// å‘é€å¼€å§‹æŒ‡ä»¤
function startRecording() {
    ws.send(JSON.stringify({
        type: 'control',
        command: 'start',
        timestamp: Date.now()
    }));
}

// å‘é€éŸ³é¢‘æ•°æ®
function sendAudio(audioData) {
    // audioData åº”è¯¥æ˜¯ Base64 ç¼–ç çš„ PCM æ•°æ®
    ws.send(JSON.stringify({
        type: 'audio',
        data: audioData,
        timestamp: Date.now()
    }));
}

// å‘é€åœæ­¢æŒ‡ä»¤
function stopRecording() {
    ws.send(JSON.stringify({
        type: 'control',
        command: 'stop',
        timestamp: Date.now()
    }));
}
```

### cURL æµ‹è¯•å¥åº·æ£€æŸ¥

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:9999/health

# æœåŠ¡ä¿¡æ¯
curl http://localhost:9999/

# ç»Ÿè®¡ä¿¡æ¯
curl http://localhost:9999/stats
```

---

## API æ–‡æ¡£

### WebSocket åè®®

#### è¿æ¥åœ°å€
```
ws://[server_ip]:9999/ws/asr
```

#### å®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯

**æ§åˆ¶æŒ‡ä»¤**
```json
{
  "type": "control",
  "command": "start|stop|reset",
  "timestamp": 1698756432000
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| type | string | æ˜¯ | æ¶ˆæ¯ç±»å‹ï¼Œå›ºå®šä¸º "control" |
| command | string | æ˜¯ | æ§åˆ¶å‘½ä»¤ï¼šstart(å¼€å§‹) / stop(åœæ­¢) / reset(é‡ç½®) |
| timestamp | integer | å¦ | æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ |

**éŸ³é¢‘æ•°æ®**
```json
{
  "type": "audio",
  "data": "base64_encoded_pcm_data",
  "timestamp": 1698756432000
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| type | string | æ˜¯ | æ¶ˆæ¯ç±»å‹ï¼Œå›ºå®šä¸º "audio" |
| data | string | æ˜¯ | Base64 ç¼–ç çš„ PCM éŸ³é¢‘æ•°æ® |
| timestamp | integer | å¦ | æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ |

#### æœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯

**è¯†åˆ«ç»“æœ**
```json
{
  "type": "result",
  "mode": "partial",
  "text": "è¯†åˆ«çš„æ–‡æœ¬å†…å®¹",
  "timestamp": 1698756432000,
  "confidence": 0.95,
  "processing_time_ms": 125.5
}
```

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| type | string | æ¶ˆæ¯ç±»å‹ï¼Œå›ºå®šä¸º "result" |
| mode | string | ç»“æœæ¨¡å¼ï¼špartial(éƒ¨åˆ†) / final(æœ€ç»ˆ) |
| text | string | è¯†åˆ«å‡ºçš„æ–‡æœ¬å†…å®¹ |
| timestamp | integer | æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ |
| confidence | float | ç½®ä¿¡åº¦ï¼ˆ0-1ï¼‰ |
| processing_time_ms | float | å¤„ç†è€—æ—¶ï¼ˆæ¯«ç§’ï¼‰ |

**çŠ¶æ€æ¶ˆæ¯**
```json
{
  "type": "status",
  "code": 200,
  "message": "è¿æ¥æˆåŠŸ",
  "timestamp": 1698756432000
}
```

**é”™è¯¯æ¶ˆæ¯**
```json
{
  "type": "error",
  "code": 500,
  "message": "é”™è¯¯æè¿°",
  "timestamp": 1698756432000
}
```

### HTTP æ¥å£

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ | å“åº” |
|------|------|------|------|
| `/` | GET | æœåŠ¡ä¿¡æ¯ | JSON |
| `/health` | GET | å¥åº·æ£€æŸ¥ | JSON |
| `/stats` | GET | ç»Ÿè®¡ä¿¡æ¯ | JSON |
| `/test` | GET | æµ‹è¯•é¡µé¢ | HTML |

---

## æ€§èƒ½æŒ‡æ ‡

### CPU ç¯å¢ƒï¼ˆ4æ ¸å¿ƒ / 8GB å†…å­˜ï¼‰

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| **è¯†åˆ«å»¶è¿Ÿ** | < 1000ms | å•æ¬¡è¯†åˆ«çš„ç«¯åˆ°ç«¯å»¶è¿Ÿ |
| **å¹¶å‘è¿æ¥** | 10-20 | åŒæ—¶æ”¯æŒçš„ WebSocket è¿æ¥æ•° |
| **CPU ä½¿ç”¨ç‡** | 40-60% | æ»¡è´Ÿè½½æ—¶çš„ CPU å ç”¨ |
| **å†…å­˜å ç”¨** | ~4GB | æ¨¡å‹åŠ è½½åçš„å†…å­˜ä½¿ç”¨ |
| **è¯†åˆ«å‡†ç¡®ç‡** | â‰¥ 95% | æ ‡å‡†æ™®é€šè¯ç¯å¢ƒ |

### GPU ç¯å¢ƒï¼ˆå¯é€‰ï¼‰

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| **è¯†åˆ«å»¶è¿Ÿ** | < 300ms | ä½¿ç”¨ GPU åŠ é€Ÿ |
| **å¹¶å‘è¿æ¥** | 50-100 | GPU ç¯å¢ƒä¸‹çš„å¹¶å‘èƒ½åŠ› |
| **GPU ä½¿ç”¨ç‡** | 30-50% | æ»¡è´Ÿè½½æ—¶çš„ GPU å ç”¨ |

---

## æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯ï¼ˆWebSocket Clientï¼‰                   â”‚
â”‚            å‘é€éŸ³é¢‘æ•°æ® + æ§åˆ¶æŒ‡ä»¤ (start/stop)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åç«¯æ¥å£æœåŠ¡ï¼ˆFastAPIï¼‰                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Web æœåŠ¡å±‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  FastAPI + WebSocket Handler           â”‚                â”‚
â”‚  â”‚  â€¢ æ¥å— WebSocket è¿æ¥                  â”‚                â”‚
â”‚  â”‚  â€¢ è·¯ç”±ï¼š/ws/asr                        â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                          â†“                                    â”‚
â”‚  ä¸šåŠ¡é€»è¾‘å±‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ è¿æ¥ç®¡ç†   â”‚  â”‚ éŸ³é¢‘å¤„ç†   â”‚  â”‚ ç»“æœå°è£…   â”‚            â”‚
â”‚  â”‚â€¢ å¤šè¿æ¥    â”‚  â”‚â€¢ Base64è§£ç â”‚  â”‚â€¢ JSONå°è£…  â”‚            â”‚
â”‚  â”‚â€¢ çŠ¶æ€è·Ÿè¸ª  â”‚  â”‚â€¢ PCMè½¬æ¢   â”‚  â”‚â€¢ æ—¶é—´æˆ³    â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                          â†“                                    â”‚
â”‚  è¯­éŸ³è¯†åˆ«å±‚ (FunASR)                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚   FunASR æ¨¡å‹ï¼ˆå¸¸é©»å†…å­˜ï¼‰                 â”‚                â”‚
â”‚  â”‚   â€¢ paraformer-zh-streaming             â”‚                â”‚
â”‚  â”‚   â€¢ åº”ç”¨å¯åŠ¨æ—¶åŠ è½½                       â”‚                â”‚
â”‚  â”‚   â€¢ æ¥æ”¶éŸ³é¢‘æ—¶è°ƒç”¨ generate()            â”‚                â”‚
â”‚  â”‚   â€¢ æ— éŸ³é¢‘æ—¶ç©ºé—²ï¼Œä¸æ¶ˆè€—è®¡ç®—èµ„æº          â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ | ç‰ˆæœ¬ |
|------|------|------|
| **ç¼–ç¨‹è¯­è¨€** | Python | 3.8+ |
| **Web æ¡†æ¶** | FastAPI | 0.104+ |
| **WebSocket** | websockets | 12.0+ |
| **ASR å¼•æ“** | FunASR | 1.0+ |
| **æ·±åº¦å­¦ä¹ ** | PyTorch | 2.1.0 (CPU) |
| **éŸ³é¢‘å¤„ç†** | soundfile, numpy | - |
| **å®¹å™¨åŒ–** | Docker, Docker Compose | - |

---

## æ–‡æ¡£

- [ğŸ“˜ å¼€å‘æ–‡æ¡£](./å¼€å‘æ–‡æ¡£.md) - è¯¦ç»†çš„æŠ€æœ¯è®¾è®¡å’Œå®ç°è¯´æ˜
- [ğŸ“— éƒ¨ç½²æ–‡æ¡£](./éƒ¨ç½²æ–‡æ¡£.md) - å®Œæ•´çš„éƒ¨ç½²æŒ‡å—å’Œè¿ç»´æ‰‹å†Œ
- [ğŸ“™ å¿«é€Ÿå¯åŠ¨æŒ‡å—](./å¿«é€Ÿå¯åŠ¨æŒ‡å—.md) - 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹
- [ğŸ“• Windows ä½¿ç”¨è¯´æ˜](./Windowsä½¿ç”¨è¯´æ˜.md) - Windows å¹³å°ä¸“ç”¨æŒ‡å—
- [ğŸ“Š é¡¹ç›®äº¤ä»˜æ¸…å•](./é¡¹ç›®äº¤ä»˜æ¸…å•.md) - åŠŸèƒ½æ¸…å•å’ŒéªŒè¯æ­¥éª¤

---

## å¸¸è§é—®é¢˜

<details>
<summary><b>Q: æ¨¡å‹ä¸‹è½½å¾ˆæ…¢æ€ä¹ˆåŠï¼Ÿ</b></summary>

A: æ¨¡å‹ä¼šè‡ªåŠ¨ä» ModelScope ä¸‹è½½ã€‚å¦‚æœä¸‹è½½æ…¢ï¼Œå¯ä»¥ï¼š
1. ä½¿ç”¨ä»£ç†æˆ– VPN
2. æ‰‹åŠ¨ä¸‹è½½æ¨¡å‹åˆ° `~/.cache/modelscope/` ç›®å½•
3. ç­‰å¾…è‡ªåŠ¨é‡è¯•

</details>

<details>
<summary><b>Q: å¦‚ä½•æé«˜å¹¶å‘è¿æ¥æ•°ï¼Ÿ</b></summary>

A: 
1. å¢åŠ æœåŠ¡å™¨ CPU æ ¸å¿ƒæ•°
2. éƒ¨ç½²å¤šä¸ªå®ä¾‹ + Nginx è´Ÿè½½å‡è¡¡
3. ä½¿ç”¨ GPU åŠ é€Ÿï¼ˆå¯æå‡ 3-5 å€æ€§èƒ½ï¼‰
4. è°ƒæ•´ `MAX_CONNECTIONS` ç¯å¢ƒå˜é‡

</details>

<details>
<summary><b>Q: æ”¯æŒå…¶ä»–è¯­è¨€å—ï¼Ÿ</b></summary>

A: æ”¯æŒï¼ä¿®æ”¹ `MODEL_NAME` ç¯å¢ƒå˜é‡å³å¯ï¼š
- ä¸­æ–‡ï¼š`paraformer-zh-streaming`
- è‹±æ–‡ï¼š`paraformer-en-streaming`

</details>

<details>
<summary><b>Q: Docker æ„å»ºå¤±è´¥æ€ä¹ˆåŠï¼Ÿ</b></summary>

A: 
1. é…ç½® Docker é•œåƒåŠ é€Ÿå™¨
2. æ£€æŸ¥ç½‘ç»œè¿æ¥
3. æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
4. å‚è€ƒ [Windowsä½¿ç”¨è¯´æ˜.md](./Windowsä½¿ç”¨è¯´æ˜.md)

</details>

<details>
<summary><b>Q: CPU ç¯å¢ƒæ€§èƒ½å¦‚ä½•ï¼Ÿ</b></summary>

A: 
- å•æ¬¡è¯†åˆ«å»¶è¿Ÿï¼š500-1000ms
- å¹¶å‘è¿æ¥ï¼š10-20 ä¸ª
- é€‚åˆä¸­å°è§„æ¨¡åº”ç”¨
- å»ºè®®ä½¿ç”¨ GPU æå‡æ€§èƒ½

</details>

<details>
<summary><b>Q: å¦‚ä½•åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ï¼Ÿ</b></summary>

A: æ¨èé…ç½®ï¼š
1. ä½¿ç”¨ Docker Compose éƒ¨ç½²
2. é…ç½® Nginx åå‘ä»£ç†
3. å¯ç”¨ HTTPS/WSS
4. éƒ¨ç½²å¤šå®ä¾‹ + è´Ÿè½½å‡è¡¡
5. é…ç½®ç›‘æ§å’Œæ—¥å¿—

è¯¦è§ [éƒ¨ç½²æ–‡æ¡£](./éƒ¨ç½²æ–‡æ¡£.md)

</details>

---

## æ›´æ–°æ—¥å¿—

### v2.1.0 (2024-10-28)

#### æ–°å¢
- âœ¨ Windows ä¸€é”®éƒ¨ç½²è„šæœ¬
- âœ¨ å®Œæ•´çš„æµ‹è¯•å·¥å…·é›†
- âœ¨ è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£

#### ä¼˜åŒ–
- ğŸ”§ ä¼˜åŒ–ä¸ºçº¯ CPU éƒ¨ç½²æ–¹æ¡ˆ
- ğŸ”§ Docker é•œåƒä½¿ç”¨é˜¿é‡Œäº‘æº
- ğŸ”§ åˆ†æ­¥å®‰è£… PyTorchï¼Œé¿å…ç‰ˆæœ¬å†²çª
- ğŸ”§ æ‰€æœ‰è„šæœ¬è‡ªåŠ¨åˆ‡æ¢åˆ°æ­£ç¡®ç›®å½•

#### ä¿®å¤
- ğŸ› ä¿®å¤ Docker éƒ¨ç½²è·¯å¾„é—®é¢˜
- ğŸ› ä¿®å¤æ‰¹å¤„ç†è„šæœ¬ç›®å½•åˆ‡æ¢é—®é¢˜

### v2.0.0 (2024-10-28)

- ğŸ‰ é¦–æ¬¡å‘å¸ƒ
- âœ¨ æ”¯æŒ PTT æ¨¡å¼
- âœ¨ WebSocket å®æ—¶é€šä¿¡
- âœ¨ Docker éƒ¨ç½²æ”¯æŒ

---

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### å¼€å‘è§„èŒƒ

- ä»£ç é£æ ¼ï¼šéµå¾ª PEP 8
- æäº¤ä¿¡æ¯ï¼šä½¿ç”¨è¯­ä¹‰åŒ–æäº¤è§„èŒƒ
- æµ‹è¯•ï¼šæ·»åŠ å¿…è¦çš„å•å…ƒæµ‹è¯•
- æ–‡æ¡£ï¼šæ›´æ–°ç›¸å…³æ–‡æ¡£

---

## è‡´è°¢

æœ¬é¡¹ç›®åŸºäºä»¥ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼š

- [FunASR](https://github.com/modelscope/FunASR) - é˜¿é‡Œè¾¾æ‘©é™¢å¼€æºçš„è¯­éŸ³è¯†åˆ«å·¥å…·åŒ…
- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£åŒ–çš„ Python Web æ¡†æ¶
- [ModelScope](https://www.modelscope.cn/) - æ¨¡å‹æ‰˜ç®¡å¹³å°

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„æ”¯æŒï¼

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](./LICENSE) æ–‡ä»¶

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ï¸ Starï¼**

Made with â¤ï¸ by Hurrvey

</div>
